#!/bin/bash
pipe=/tmp/markov_pipe

trap "rm -f $pipe" EXIT

if [[ ! -f input.txt ]]; then
    exit
fi

if [[ ! -f bin/helper ]]; then
    exit
fi

if [[ ! -p $pipe ]]; then
    mkfifo $pipe
fi

bin/helper $pipe&

# Replace next line with python output
cat input.txt > $pipe

wait
exit
